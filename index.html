<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Detective AI Assistant</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Roboto&display=swap');

  /* Reset & base */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; padding: 0;
    background: #0a0f14;
    color: #00ffea;
    font-family: 'Orbitron', 'Roboto', sans-serif;
    display: flex;
    flex-direction: column;
    height: 100vh;
  }

  header {
    padding: 20px;
    text-align: center;
    background: linear-gradient(90deg, #00fff7, #009688);
    box-shadow: 0 0 15px #00fff7;
    user-select: none;
  }
  header h1 {
    margin: 0;
    font-weight: 700;
    font-size: 1.8rem;
    letter-spacing: 0.12em;
    text-shadow: 0 0 15px #00ffea;
  }
  header img {
    height: 48px;
    vertical-align: middle;
    margin-right: 12px;
    filter: drop-shadow(0 0 4px #00fff7);
  }

  main {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    max-width: 900px;
    margin: 0 auto;
    padding: 15px;
  }

  #chat-container {
    background: #121b22;
    border-radius: 15px 15px 0 0;
    box-shadow: 0 0 20px #00ffe7aa inset;
    flex: 1;
    overflow-y: auto;
    padding: 20px;
    font-size: 1rem;
    line-height: 1.4;
    color: #a4f9f5;
    scrollbar-width: thin;
    scrollbar-color: #00ffe7 #0a0f14;
  }
  /* Custom scrollbar */
  #chat-container::-webkit-scrollbar {
    width: 8px;
  }
  #chat-container::-webkit-scrollbar-track {
    background: #0a0f14;
  }
  #chat-container::-webkit-scrollbar-thumb {
    background: #00ffe7cc;
    border-radius: 4px;
  }

  .message {
    margin-bottom: 18px;
    max-width: 75%;
    word-wrap: break-word;
    padding: 12px 18px;
    border-radius: 18px;
    box-shadow: 0 0 8px #00ffe7bb;
    font-family: 'Roboto', sans-serif;
    font-size: 1rem;
  }
  .message.bot {
    background: #003939;
    align-self: flex-start;
    border-top-left-radius: 0;
  }
  .message.user {
    background: #00504f;
    align-self: flex-end;
    border-top-right-radius: 0;
  }

  #input-area {
    display: flex;
    background: #071011;
    padding: 12px 16px;
    border-radius: 0 0 15px 15px;
    box-shadow: 0 0 20px #00ffe7aa;
  }
  #input-area input[type="text"] {
    flex: 1;
    border: none;
    outline: none;
    border-radius: 8px;
    padding: 12px 16px;
    font-size: 1rem;
    font-family: 'Roboto', sans-serif;
    background: #011c1a;
    color: #00fff7;
    box-shadow: inset 0 0 10px #008070;
    transition: box-shadow 0.3s ease;
  }
  #input-area input[type="text"]:focus {
    box-shadow: inset 0 0 15px #00ffe7;
  }
  #input-area button {
    margin-left: 12px;
    background: #00ffe7;
    border: none;
    border-radius: 10px;
    color: #003333;
    font-weight: 700;
    font-size: 1.1rem;
    cursor: pointer;
    padding: 0 20px;
    transition: background-color 0.3s ease;
    box-shadow: 0 0 12px #00ffe7;
  }
  #input-area button:hover {
    background: #00d8c9;
  }

  /* Responsive */
  @media (max-width: 600px) {
    #chat-container {
      font-size: 0.9rem;
    }
    header h1 {
      font-size: 1.4rem;
      letter-spacing: 0.1em;
    }
    #input-area input[type="text"] {
      font-size: 0.9rem;
    }
    #input-area button {
      font-size: 1rem;
      padding: 0 16px;
    }
  }

</style>
</head>
<body>

<header>
  <img src="https://cdn-icons-png.flaticon.com/512/616/616408.png" alt="Detective AI Logo" />
  <h1>DETECTIVE AI ASSISTANT</h1>
</header>

<main>
  <div id="chat-container" aria-live="polite" aria-label="Chat messages">
    <!-- Messages appear here -->
  </div>

  <form id="chat-form" action="https://formspree.io/f/your_form_id" method="POST" target="_blank">
    <!-- Replace your_form_id with your actual Formspree ID -->
    <div id="input-area">
      <input type="text" name="message" id="user-input" autocomplete="off" placeholder="Describe your situation..." required />
      <button type="submit" aria-label="Send message">âž¤</button>
    </div>
  </form>
</main>

<script>
  const chatContainer = document.getElementById('chat-container');
  const chatForm = document.getElementById('chat-form');
  const userInput = document.getElementById('user-input');

  // Sample AI auto questions sequence for detective chatbot
  const questions = [
    "Hello, I'm your Detective AI. Can you please tell me your full name?",
    "Thank you. How old are you?",
    "When did the incident happen? Please provide a date or time frame.",
    "Where did it happen? Be as specific as possible.",
    "Can you describe the person(s) involved?",
    "What exactly happened? Please give details.",
    "Did you tell anyone else about this?",
    "How has this affected you?",
    "Is there any evidence you can share?",
    "Thank you for sharing. I will do my best to assist you."
  ];

  let currentQuestionIndex = 0;

  // Append bot message
  function appendBotMessage(text) {
    const msg = document.createElement('div');
    msg.className = 'message bot';
    msg.textContent = text;
    chatContainer.appendChild(msg);
    chatContainer.scrollTop = chatContainer.scrollHeight;
  }

  // Append user message
  function appendUserMessage(text) {
    const msg = document.createElement('div');
    msg.className = 'message user';
    msg.textContent = text;
    chatContainer.appendChild(msg);
    chatContainer.scrollTop = chatContainer.scrollHeight;
  }

  // Start chat with first question
  function startChat() {
    appendBotMessage(questions[0]);
  }

  // Store user responses in localStorage for team access
  let userResponses = JSON.parse(localStorage.getItem('clientReports') || '[]');

  chatForm.addEventListener('submit', e => {
    e.preventDefault();
    const inputVal = userInput.value.trim();
    if (!inputVal) return;

    appendUserMessage(inputVal);

    // Save response for current question
    if (!userResponses[currentQuestionIndex]) {
      userResponses[currentQuestionIndex] = inputVal;
    } else {
      // in case user edits previous (unlikely here)
      userResponses[currentQuestionIndex] = inputVal;
    }
    localStorage.setItem('clientReports', JSON.stringify(userResponses));

    currentQuestionIndex++;

    userInput.value = '';
    if (currentQuestionIndex < questions.length) {
      setTimeout(() => {
        appendBotMessage(questions[currentQuestionIndex]);
      }, 800);
    } else {
      // Final message
      setTimeout(() => {
        appendBotMessage("Your report has been saved securely. Thank you for trusting Detective AI.");
      }, 1000);
    }
  });

  // Kick off on page load
  window.onload = () => {
    chatContainer.innerHTML = '';
    currentQuestionIndex = 0;
    userResponses = [];
    startChat();
  };
</script>

</body>
</html>
